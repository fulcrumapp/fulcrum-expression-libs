!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mgrs=e()}(function(){return function n(o,a,i){function s(r,e){if(!a[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(f)return f(r,!0);throw(e=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",e}t=a[r]={exports:{}},o[r][0].call(t.exports,function(e){return s(o[r][1][e]||e)},t,t.exports,n,o,a,i)}return a[r].exports}for(var f="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({mgrs:[function(e,r,t){var n;n=this,function(e){"use strict";const M=65,p=73,w=79;function c(e){return e*(Math.PI/180)}function g(e){return e/Math.PI*180}function v(e){const r=e.northing,t=e.easting,{zoneLetter:n,zoneNumber:o}=e;if(o<0||60<o)return null;var a=6378137,i=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),s=t-5e5;let f=r;n<"N"&&(f-=1e7);var c=6*(o-1)-180+3,h=f/.9996/6367449.145945056,i=h+(3*i/2-27*i*i*i/32)*Math.sin(2*h)+(21*i*i/16-55*i*i*i*i/32)*Math.sin(4*h)+151*i*i*i/96*Math.sin(6*h),h=a/Math.sqrt(1-.00669438*Math.sin(i)*Math.sin(i)),u=Math.tan(i)*Math.tan(i),l=.006739496752268451*Math.cos(i)*Math.cos(i),a=.99330562*a/Math.pow(1-.00669438*Math.sin(i)*Math.sin(i),1.5),s=s/(.9996*h),h=g(i-h*Math.tan(i)/a*(s*s/2-(5+3*u+10*l-4*l*l-.06065547077041606)*s*s*s*s/24+(61+90*u+298*l+45*u*u-1.6983531815716497-3*l*l)*s*s*s*s*s*s/720));let d,b=(s-(1+2*u+l)*s*s*s/6+(5-2*l+28*u-3*l*l+.05391597401814761+24*u*u)*s*s*s*s*s/120)/Math.cos(i);if(b=c+g(b),"number"==typeof e.accuracy){const r=v({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});d={top:r.lat,right:r.lon,bottom:h,left:b}}else d={lat:h,lon:b};return d}function h(e){return e<=84&&72<=e?"X":e<72&&-80<=e?"CDEFGHJKLMNPQRSTUVWX"[Math.floor((e- -80)/8)]:84<e||e<-80?"Z":void 0}function y(e){let r=e%6;return r=0===r?6:r}function r(e){if(e&&0===e.length)throw new TypeError("MGRSPoint coverting from nothing");var r=(e=e.replace(/ /g,""))["length"];let t,n=null,o="",a=0;for(;!/[A-Z]/.test(t=e.charAt(a));){if(2<=a)throw new Error("MGRSPoint bad conversion from: "+e);o+=t,a++}var i=parseInt(o,10);if(0===a||a+3>r)throw new Error("MGRSPoint bad conversion from "+e);var s=e.charAt(a++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw new Error(`MGRSPoint zone letter ${s} not handled: `+e);n=e.substring(a,a+=2);const f=y(i),c=function(e){let r="AJSAJS".charCodeAt(f-1),t=1e5,n=!1;for(;r!==e.charCodeAt(0);){if(++r===p&&r++,r===w&&r++,90<r){if(n)throw new Error("Bad character: "+e);r=M,n=!0}t+=1e5}return t}(n.charAt(0));let h=function(e,r){if("V"<e)throw new TypeError("MGRSPoint given invalid Northing "+e);let t="AFAFAF".charCodeAt(r-1),n=0,o=!1;for(;t!==e.charCodeAt(0);){if(++t===p&&t++,t===w&&t++,86<t){if(o)throw new Error("Bad character: "+e);t=M,o=!0}n+=1e5}return n}(n.charAt(1),f);for(;h<function(e){let r;switch(e){case"C":r=11e5;break;case"D":r=2e6;break;case"E":r=28e5;break;case"F":r=37e5;break;case"G":r=46e5;break;case"H":r=55e5;break;case"J":r=64e5;break;case"K":r=73e5;break;case"L":r=82e5;break;case"M":r=91e5;break;case"N":r=0;break;case"P":r=8e5;break;case"Q":r=17e5;break;case"R":r=26e5;break;case"S":r=35e5;break;case"T":r=44e5;break;case"U":r=53e5;break;case"V":r=62e5;break;case"W":r=7e6;break;case"X":r=79e5;break;default:r=-1}if(0<=r)return r;throw new TypeError("Invalid zone letter: "+e)}(s);)h+=2e6;r-=a;if(r%2!=0)throw new Error("MGRSPoint has to have an even number\nof digits after the zone letter and two 100km letters - front\nhalf for easting meters, second half for\nnorthing meters "+e);r/=2;let u,l,d,b=0,g=0;return 0<r&&(u=1e5/Math.pow(10,r),l=e.substring(a,a+r),b=parseFloat(l)*u,d=e.substring(a+r),g=parseFloat(d)*u),{easting:b+c,northing:g+h,zoneLetter:s,zoneNumber:i,accuracy:u}}e.forward=function(e,r){if(r="number"==typeof r?r:5,!Array.isArray(e))throw new TypeError("forward did not receive an array");if("string"==typeof e[0]||"string"==typeof e[1])throw new TypeError("forward received an array of strings, but it only accepts an array of numbers.");var t,[e,n]=e;if(e<-180||180<e)throw new TypeError("forward received an invalid longitude of "+e);if(n<-90||90<n)throw new TypeError("forward received an invalid latitude of "+n);if(n<-80||84<n)throw new TypeError(`forward received a latitude of ${n}, but this library does not support conversions of points in polar regions below 80°S and above 84°N`);return t=function(e){var r=e.lat,e=e.lon,t=c(r),n=c(e);let o;o=Math.floor((e+180)/6)+1,180===e&&(o=60),56<=r&&r<64&&3<=e&&e<12&&(o=32),72<=r&&r<84&&(0<=e&&e<9?o=31:9<=e&&e<21?o=33:21<=e&&e<33?o=35:33<=e&&e<42&&(o=37));var e=c(6*(o-1)-180+3),a=6378137/Math.sqrt(1-.00669438*Math.sin(t)*Math.sin(t)),i=Math.tan(t)*Math.tan(t),s=.006739496752268451*Math.cos(t)*Math.cos(t),n=Math.cos(t)*(n-e),e=.9996*a*(n+(1-i+s)*n*n*n/6+(5-18*i+i*i+72*s-.39089081163157013)*n*n*n*n*n/120)+5e5;let f=.9996*(6378137*(.9983242984503243*t-.002514607064228144*Math.sin(2*t)+2639046602129982e-21*Math.sin(4*t)-3.418046101696858e-9*Math.sin(6*t))+a*Math.tan(t)*(n*n/2+(5-i+9*s+4*s*s)*n*n*n*n/24+(61-58*i+i*i+600*s-2.2240339282485886)*n*n*n*n*n*n/720));return r<0&&(f+=1e7),{northing:Math.trunc(f),easting:Math.trunc(e),zoneNumber:o,zoneLetter:h(r)}}({lat:n,lon:e}),n=r,e="00000"+t.easting,r="00000"+t.northing,t.zoneNumber+t.zoneLetter+function(n,o){var a=y(t.zoneNumber),n=Math.floor(n/1e5),o=Math.floor(o/1e5)%20;{var a,i="AJSAJS".charCodeAt(a=a-1),a="AFAFAF".charCodeAt(a);let e=i+n-1,r=a+o,t=!1;return 90<e&&(e=e-90+M-1,t=!0),(e===p||i<p&&e>p||(e>p||i<p)&&t)&&e++,(e===w||i<w&&e>w||(e>w||i<w)&&t)&&++e===p&&e++,90<e&&(e=e-90+M-1),t=86<r&&(r=r-86+M-1,!0),(r===p||a<p&&r>p||(r>p||a<p)&&t)&&r++,(r===w||a<w&&r>w||(r>w||a<w)&&t)&&++r===p&&r++,86<r&&(r=r-86+M-1),String.fromCharCode(e)+String.fromCharCode(r)}}(t.easting,t.northing)+e.substr(e.length-5,n)+r.substr(r.length-5,n)},e.getLetterDesignator=h,e.inverse=function(e){e=v(r(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},e.toPoint=function(e){if(""===e)throw new TypeError("toPoint received a blank string");e=v(r(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]},Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof t&&void 0!==r?t:(n=n||self).mgrs={})},{}]},{},[])("mgrs")});

// mgrs 2.0.0
var mgrs = module.exports;
