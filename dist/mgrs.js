!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mgrs=e()}(function(){return function n(a,o,i){function s(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=o[t]={exports:{}},a[t][0].call(r.exports,function(e){return s(a[t][1][e]||e)},r,r.exports,n,a,o,i)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({mgrs:[function(e,t,r){var n;n=this,function(e){"use strict";var t=6,d="AJSAJS",M="AFAFAF",b=65,g=73,v=79,m=86,p=90;function r(e,t){return t=t||5,r=function(e){var t,r,n,a,o=e.lat,i=e.lon,s=.00669438,c=h(o),f=h(i);a=Math.floor((i+180)/6)+1,180===i&&(a=60);56<=o&&o<64&&3<=i&&i<12&&(a=32);72<=o&&o<84&&(0<=i&&i<9?a=31:9<=i&&i<21?a=33:21<=i&&i<33?a=35:33<=i&&i<42&&(a=37));n=h(6*(a-1)-180+3),t=s/(1-s),r=6378137/Math.sqrt(1-s*Math.sin(c)*Math.sin(c)),e=Math.tan(c)*Math.tan(c),i=t*Math.cos(c)*Math.cos(c),f=Math.cos(c)*(f-n),n=6378137*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-35*s*s*s/3072*Math.sin(6*c));s=.9996*r*(f+(1-e+i)*f*f*f/6+(5-18*e+e*e+72*i-58*t)*f*f*f*f*f/120)+5e5,f=.9996*(n+r*Math.tan(c)*(f*f/2+(5-e+9*i+4*i*i)*f*f*f*f/24+(61-58*e+e*e+600*i-330*t)*f*f*f*f*f*f/720));o<0&&(f+=1e7);return{northing:Math.round(f),easting:Math.round(s),zoneNumber:a,zoneLetter:function(e){var t="Z";e<=84&&72<=e?t="X":e<72&&64<=e?t="W":e<64&&56<=e?t="V":e<56&&48<=e?t="U":e<48&&40<=e?t="T":e<40&&32<=e?t="S":e<32&&24<=e?t="R":e<24&&16<=e?t="Q":e<16&&8<=e?t="P":e<8&&0<=e?t="N":e<0&&-8<=e?t="M":e<-8&&-16<=e?t="L":e<-16&&-24<=e?t="K":e<-24&&-32<=e?t="J":e<-32&&-40<=e?t="H":e<-40&&-48<=e?t="G":e<-48&&-56<=e?t="F":e<-56&&-64<=e?t="E":e<-64&&-72<=e?t="D":e<-72&&-80<=e&&(t="C");return t}(o)}}({lat:e[1],lon:e[0]}),n=t,e="00000"+r.easting,t="00000"+r.northing,r.zoneNumber+r.zoneLetter+function(e,t,r){r=k(r),e=Math.floor(e/1e5),t=Math.floor(t/1e5)%20;return function(e,t,r){var n=r-1,a=d.charCodeAt(n),r=M.charCodeAt(n),n=a+e-1,e=r+t,t=!1;p<n&&(n=n-p+b-1,t=!0);(n===g||a<g&&g<n||(g<n||a<g)&&t)&&n++;(n===v||a<v&&v<n||(v<n||a<v)&&t)&&++n===g&&n++;p<n&&(n=n-p+b-1);t=m<e&&(e=e-m+b-1,!0);(e===g||r<g&&g<e||(g<e||r<g)&&t)&&e++;(e===v||r<v&&v<e||(v<e||r<v)&&t)&&++e===g&&e++;m<e&&(e=e-m+b-1);return String.fromCharCode(n)+String.fromCharCode(e)}(e,t,r)}(r.easting,r.northing,r.zoneNumber)+e.substr(e.length-5,n)+t.substr(t.length-5,n);var r,n}function n(e){e=l(o(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function a(e){e=l(o(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function h(e){return e*(Math.PI/180)}function u(e){return e/Math.PI*180}function l(e){var t=e.northing,r=e.easting,n=e.zoneLetter,a=e.zoneNumber;if(a<0||60<a)return null;var o=6378137,i=.00669438,s=(1-Math.sqrt(1-i))/(1+Math.sqrt(1-i)),c=r-5e5,f=t;n<"N"&&(f-=1e7);r=6*(a-1)-180+3,t=i/(1-i),a=(n=f/.9996/6367449.145945056)+(3*s/2-27*s*s*s/32)*Math.sin(2*n)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*n)+151*s*s*s/96*Math.sin(6*n),f=o/Math.sqrt(1-i*Math.sin(a)*Math.sin(a)),s=Math.tan(a)*Math.tan(a),n=t*Math.cos(a)*Math.cos(a),i=o*(1-i)/Math.pow(1-i*Math.sin(a)*Math.sin(a),1.5),c/=.9996*f,i=u(i=a-f*Math.tan(a)/i*(c*c/2-(5+3*s+10*n-4*n*n-9*t)*c*c*c*c/24+(61+90*s+298*n+45*s*s-252*t-3*n*n)*c*c*c*c*c*c/720)),a=r+u(a=(c-(1+2*s+n)*c*c*c/6+(5-2*n+28*s-3*n*n+8*t+24*s*s)*c*c*c*c*c/120)/Math.cos(a));return e.accuracy?{top:(e=l({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber})).lat,right:e.lon,bottom:i,left:a}:{lat:i,lon:a}}function k(e){e%=t;return e=0===e?t:e}function o(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,a="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+e;a+=t,o++}var i=parseInt(a,10);if(0===o||r<o+3)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;for(var n=e.substring(o,o+=2),c=k(i),f=function(e,t){var r=d.charCodeAt(t-1),n=1e5,a=!1;for(;r!==e.charCodeAt(0);){if(++r===g&&r++,r===v&&r++,p<r){if(a)throw"Bad character: "+e;r=b,a=!0}n+=1e5}return n}(n.charAt(0),c),h=function(e,t){if("V"<e)throw"MGRSPoint given invalid Northing "+e;var r=M.charCodeAt(t-1),n=0,a=!1;for(;r!==e.charCodeAt(0);){if(++r===g&&r++,r===v&&r++,m<r){if(a)throw"Bad character: "+e;r=b,a=!0}n+=1e5}return n}(n.charAt(1),c);h<function(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}{if(0<=t)return t;throw"Invalid zone letter: "+e}}(s);)h+=2e6;var u=r-o;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var l,n=u/2,c=0,r=0;return 0<n&&(l=1e5/Math.pow(10,n),u=e.substring(o,o+n),c=parseFloat(u)*l,n=e.substring(o+n),r=parseFloat(n)*l),{easting:c+f,northing:r+h,zoneLetter:s,zoneNumber:i,accuracy:l}}e.default={forward:r,inverse:n,toPoint:a},e.forward=r,e.inverse=n,e.toPoint=a,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof r&&void 0!==t?r:n.mgrs=n.mgrs||{})},{}]},{},[])("mgrs")});

var mgrs = module.exports;
