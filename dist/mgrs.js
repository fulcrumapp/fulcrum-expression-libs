!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mgrs=e()}(function(){return function n(a,o,i){function s(t,e){if(!o[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},a[t][0].call(r.exports,function(e){return s(a[t][1][e]||e)},r,r.exports,n,a,o,i)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({mgrs:[function(e,t,r){var n;n=this,function(e){"use strict";var t=6,d="AJSAJS",M="AFAFAF",b=65,g=73,v=79,m=86,p=90;function r(e,t){return t=t||5,e=function(e){var t,r,n,a,o,i=e.lat,e=e.lon,s=.00669438,c=f(i),h=f(e);o=Math.floor((e+180)/6)+1,180===e&&(o=60);56<=i&&i<64&&3<=e&&e<12&&(o=32);72<=i&&i<84&&(0<=e&&e<9?o=31:9<=e&&e<21?o=33:21<=e&&e<33?o=35:33<=e&&e<42&&(o=37));e=f(6*(o-1)-180+3),t=s/(1-s),r=6378137/Math.sqrt(1-s*Math.sin(c)*Math.sin(c)),n=Math.tan(c)*Math.tan(c),a=t*Math.cos(c)*Math.cos(c),h=Math.cos(c)*(h-e),e=6378137*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-35*s*s*s/3072*Math.sin(6*c));s=.9996*r*(h+(1-n+a)*h*h*h/6+(5-18*n+n*n+72*a-58*t)*h*h*h*h*h/120)+5e5,e=.9996*(e+r*Math.tan(c)*(h*h/2+(5-n+9*a+4*a*a)*h*h*h*h/24+(61-58*n+n*n+600*a-330*t)*h*h*h*h*h*h/720));i<0&&(e+=1e7);return{northing:Math.round(e),easting:Math.round(s),zoneNumber:o,zoneLetter:function(e){var t="Z";e<=84&&72<=e?t="X":e<72&&64<=e?t="W":e<64&&56<=e?t="V":e<56&&48<=e?t="U":e<48&&40<=e?t="T":e<40&&32<=e?t="S":e<32&&24<=e?t="R":e<24&&16<=e?t="Q":e<16&&8<=e?t="P":e<8&&0<=e?t="N":e<0&&-8<=e?t="M":e<-8&&-16<=e?t="L":e<-16&&-24<=e?t="K":e<-24&&-32<=e?t="J":e<-32&&-40<=e?t="H":e<-40&&-48<=e?t="G":e<-48&&-56<=e?t="F":e<-56&&-64<=e?t="E":e<-64&&-72<=e?t="D":e<-72&&-80<=e&&(t="C");return t}(i)}}({lat:e[1],lon:e[0]}),t=t,r="00000"+e.easting,n="00000"+e.northing,e.zoneNumber+e.zoneLetter+function(e,t,r){r=k(r),e=Math.floor(e/1e5),t=Math.floor(t/1e5)%20;return function(e,t,r){var r=r-1,n=d.charCodeAt(r),r=M.charCodeAt(r),e=n+e-1,t=r+t,a=!1;p<e&&(e=e-p+b-1,a=!0);(e===g||n<g&&g<e||(g<e||n<g)&&a)&&e++;(e===v||n<v&&v<e||(v<e||n<v)&&a)&&++e===g&&e++;p<e&&(e=e-p+b-1);a=m<t&&(t=t-m+b-1,!0);(t===g||r<g&&g<t||(g<t||r<g)&&a)&&t++;(t===v||r<v&&v<t||(v<t||r<v)&&a)&&++t===g&&t++;m<t&&(t=t-m+b-1);return String.fromCharCode(e)+String.fromCharCode(t)}(e,t,r)}(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t);var r,n}function n(e){e=l(o(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function a(e){e=l(o(e.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function f(e){return e*(Math.PI/180)}function u(e){return e/Math.PI*180}function l(e){var t,r,n,a,o,i=e.northing,s=e.easting,c=e.zoneLetter,h=e.zoneNumber;return h<0||60<h?null:(o=6378137,s=s-5e5,i=i,c<"N"&&(i-=1e7),c=6*(h-1)-180+3,t=(h=.00669438)/(1-h),r=(i=i/.9996/6367449.145945056)+(3*(r=(1-Math.sqrt(1-h))/(1+Math.sqrt(1-h)))/2-27*r*r*r/32)*Math.sin(2*i)+(21*r*r/16-55*r*r*r*r/32)*Math.sin(4*i)+151*r*r*r/96*Math.sin(6*i),i=o/Math.sqrt(1-h*Math.sin(r)*Math.sin(r)),n=Math.tan(r)*Math.tan(r),a=t*Math.cos(r)*Math.cos(r),o=o*(1-h)/Math.pow(1-h*Math.sin(r)*Math.sin(r),1.5),h=s/(.9996*i),s=u(s=r-i*Math.tan(r)/o*(h*h/2-(5+3*n+10*a-4*a*a-9*t)*h*h*h*h/24+(61+90*n+298*a+45*n*n-252*t-3*a*a)*h*h*h*h*h*h/720)),i=c+u(i=(h-(1+2*n+a)*h*h*h/6+(5-2*a+28*n-3*a*a+8*t+24*n*n)*h*h*h*h*h/120)/Math.cos(r)),e.accuracy?{top:(o=l({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber})).lat,right:o.lon,bottom:s,left:i}:{lat:s,lon:i})}function k(e){e%=t;return e=0===e?t:e}function o(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,a="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+e;a+=t,o++}var i=parseInt(a,10);if(0===o||r<o+3)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;for(var n=e.substring(o,o+=2),c=k(i),h=function(e,t){var r=d.charCodeAt(t-1),n=1e5,a=!1;for(;r!==e.charCodeAt(0);){if(++r===g&&r++,r===v&&r++,p<r){if(a)throw"Bad character: "+e;r=b,a=!0}n+=1e5}return n}(n.charAt(0),c),f=function(e,t){if("V"<e)throw"MGRSPoint given invalid Northing "+e;var r=M.charCodeAt(t-1),n=0,a=!1;for(;r!==e.charCodeAt(0);){if(++r===g&&r++,r===v&&r++,m<r){if(a)throw"Bad character: "+e;r=b,a=!0}n+=1e5}return n}(n.charAt(1),c);f<function(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}{if(0<=t)return t;throw"Invalid zone letter: "+e}}(s);)f+=2e6;n=r-o;if(n%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var u,l,c=n/2,r=0,n=0;return 0<c&&(u=1e5/Math.pow(10,c),l=e.substring(o,o+c),r=parseFloat(l)*u,l=e.substring(o+c),n=parseFloat(l)*u),{easting:r+h,northing:n+f,zoneLetter:s,zoneNumber:i,accuracy:u}}e.default={forward:r,inverse:n,toPoint:a},e.forward=r,e.inverse=n,e.toPoint=a,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof r&&void 0!==t?r:n.mgrs=n.mgrs||{})},{}]},{},[])("mgrs")});

var mgrs = module.exports;
